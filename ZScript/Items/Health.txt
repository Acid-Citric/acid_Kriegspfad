/*
1938 Latour is a vintage wine bottle often found in wine stashes in secret areas in Return to Castle Wolfenstein.
It holds up to three gulps of wine, each one worth 25 health points.
*/
Class Health_1938_Latour : HealthPickup
{
	Default
	{
		Health 25;
		+INVENTORY.INVBAR
		Inventory.Amount 3;
		Inventory.MaxAmount 3;
		Inventory.InterHubAmount 3;
		Inventory.Icon "HEALK0";
		Inventory.PickupSound "misc/p_pkup";
		Inventory.PickupMessage "$TAG_1938_LATOUR";
		Tag "$TAG_1938_LATOUR";
		HealthPickup.AutoUse 1;
		Scale 0.6;
	}
	States
	{
	Spawn:
		HEAL K -1;
		Stop;
	}
}

Class Small_HealthPack : Health
{
	Default
	{
		-INVENTORY.ALWAYSPICKUP
		Inventory.MaxAmount 999;
		Inventory.PickupMessage "$PICKUP_HEALTH_S";
		Inventory.PickupSound "misc/health_pkup";
	}
	Override Void PostBeginPlay()
	{
		Super.PostBeginPlay();

		Int sk = G_SkillPropertyInt(SKILLP_ACSReturn);
		If(sk == 0 || sk == 4) { Amount = 10; }
		Else { Amount = 5; }

		frame = random[Small_HealthPack](6,9); //G,H,I,J
	}
	States
	{
	Spawn:
		HEAL # -1;
		Stop;
	}
}

Class Medium_HealthPack : Health
{
	Default
	{
		Inventory.PickupMessage "$PICKUP_HEALTH_M";
		Inventory.PickupSound "misc/health_pkup";
	}
	Override Void PostBeginPlay()
	{
		Super.PostBeginPlay();

		Int sk = G_SkillPropertyInt(SKILLP_ACSReturn);
		If(sk == 0 || sk == 4) { Amount = 25; }
		Else { Amount = 15; }

		frame = random[Medium_HealthPack](0,1); //A,B
	}
    Override Bool TryPickup(in out Actor Toucher)
    {
		Int Hp;
		Int sk = G_SkillPropertyInt(SKILLP_ACSReturn);
		If(sk == 0 || sk == 4) { Hp = 75; }
		Else { Hp = 85; }
		
		If(Toucher.Health > Hp && Toucher.Health < 100)
		{ 
			Toucher.GiveBody(Amount, 999);
			GoAwayAndDie();
			Return True;
		}
		Return Super.TryPickup(toucher);
	}
	Override Bool Used(Actor User)
	{
		If(User && User.Player && User.Player.Health > 0 && GetCVar('Acid_Health') == True)
		{
			User.GiveBody(Amount, 999);
			User.A_StartSound("misc/health_pkup", CHAN_ITEM);
			Destroy();
		}
		Return Super.Used(User);
	}
	States
	{
	Spawn:
		HEAL # -1;
		Stop;
	}
}

Class Large_HealthPack : Health
{
	Default
	{
		Inventory.PickupMessage "$PICKUP_HEALTH_L";
		Inventory.PickupSound "misc/health_pkup";
	}
	Override Void PostBeginPlay()
	{
		Super.PostBeginPlay();

		Int sk = G_SkillPropertyInt(SKILLP_ACSReturn);
		If(sk == 0 || sk == 4) { Amount = 50; }
		Else { Amount = 25; }

		frame = random[Large_HealthPack](2,5); //C,D,E,F
	}
    Override Bool TryPickup(in out Actor Toucher)
    {
		Int Hp;
		Int sk = G_SkillPropertyInt(SKILLP_ACSReturn);
		If(sk == 0 || sk == 4) { Hp = 50; }
		Else { Hp = 75; }
		
		If(Toucher.Health > Hp && Toucher.Health < 100)
		{ 
			Toucher.GiveBody(Amount, 999);
			GoAwayAndDie();
			Return True;
		}
		Return Super.TryPickup(toucher);
	}
	Override Bool Used(Actor User)
	{
		If(User && User.Player && User.Player.Health > 0 && GetCVar('Acid_Health') == True)
		{
			User.GiveBody(Amount, 999);
			User.A_StartSound("misc/health_pkup", CHAN_ITEM);
			Destroy();
		}
		Return Super.Used(User);
	}
	States
	{
	Spawn:
		HEAL # -1;
		Stop;
	}
}
